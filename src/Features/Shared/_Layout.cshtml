@using Microsoft.AspNetCore.Identity
@using RolleiShop.Models.Entities
@using RolleiShop.Infra.Identity
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager


<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Web</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.css" />
    <link rel="stylesheet" href="~/styles.css" />

    <style type="text/css">

      body > .grid {
        height: 100%;
      }
      .column {
        max-width: 450px;
      }
      .main.container{
        margin-top: 7em;
      }
      .secondary.menu .toc.item {
        display: none;
      }
      .text-danger{
        color: red;
      }
      .secondary.menu .right.item .item.button{
        display: none;
      }
      .secondary.menu .logo.header.item {
        display: none;
      }
      .secondary.menu .right.item .ui.button {
        margin-left: 0.5em;
      }
      .pusher {
        display: flex;
        min-height: 100vh;
        flex-direction: column;
      }
      .pusher > footer{
        flex: 1;
      }
      body > .grid {
        height: 100%;
      }
      .column {
        max-width: 450px;
      }
      @@media only screen and (max-width: 700px) {

        .ui.secondary.menu .right.item{
          display: none;
        }
        .ui.sidebar.menu > .button {
          display: none;
        }
        .ui.secondary.menu .header.item {
          display: none;
        }
        .ui.secondary.menu .logo.header.item {
          display: flex;
        }
        .ui.secondary.menu .toc.item {
          display: block;
        }
      }
    </style>

  <script type="text/javascript" src="~/node-static.js"></script>
  <script type="text/javascript" src="~/main.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.js"></script>
  <script>
  $(document)
    .ready(function() {
      $('.ui.sidebar')
        .sidebar('attach events', '.toc.item');
      $('.ui.form')
        .form({
          fields: {
            email: {
              identifier  : 'email',
              rules: [
                {
                  type   : 'empty',
                  prompt : 'Please enter your e-mail'
                },
                {
                  type   : 'email',
                  prompt : 'Please enter a valid e-mail'
                }
              ]
            },
            password: {
              identifier  : 'password',
              rules: [
                {
                  type   : 'empty',
                  prompt : 'Please enter your password'
                },
                {
                  type   : 'length[6]',
                  prompt : 'Your password must be at least 6 characters'
                }
              ]
            }
          }
        })
      ;
    })
  ;
  </script>
  </head>
  <body>
    <div class="ui vertical thin sidebar menu">
      <a asp-controller="Home" asp-action="Index" class="active header item">Home</a>
      <a asp-controller="Catalog" asp-action="Index" class="item">Cameras</a>
      <a asp-controller="Cart" asp-action="Index" class="item">Cart</a>
      @await Html.PartialAsync("_LoginPartial")
    </div>

    <div class="pusher">
      <div class ="ui container">
        <div class="ui large secondary menu">

          <a class="toc item">
            <i class="sidebar icon"></i>
          </a>

          <a asp-area="" asp-controller="Home" asp-action="Index" class="header item">
            <span style=" padding-right: 15px;">
              <img class="ui avatar image" src="~/images/logo.png" height="25">
            </span>
            Rollei Shop
          </a>

         <a asp-controller="Catalog" asp-action="Index" class="item">Cameras</a>

          <div class="right item">
            @await Html.PartialAsync("_LoginPartial")
            @await Component.InvokeAsync("Cart",  User.Identity.Name)
          </div>

          <a asp-area="" asp-controller="Home" asp-action="Index" class="logo header item">
            <span style=" padding-right: 15px;">
              <img class="ui avatar image" src="~/images/logo.png" height="25">
            </span>
            Rollei Shop
          </a>
        </div>
      </div>

      @RenderBody()

    </div>

    @RenderSection("scripts", required: false)

  </body>
</html>
